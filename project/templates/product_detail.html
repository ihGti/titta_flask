{% extends "base.html" %}

{% block title %}
-product_detail
{% endblock %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="/static/css/product_detail.css">
{% endblock %}

{% block js%}
    <script type="text/javascript" src="/static/js/product_detail.js"></script>

    <script src="/static/js/three.js"></script>
    <script src="https://unpkg.com/three@0.131.3/examples/js/controls/OrbitControls.js"></script>
    <script src="https://unpkg.com/three@0.131.0/examples/js/loaders/OBJLoader.js"></script>

{% endblock%}

{% block content %}



    <main id="m-sample">

      <div class="wrap">


    <!-- <div id="pankuzu">
      <a href="#">くず</a>>
      <a href="#">くず</a>>
      <a href="/product">商品一覧</a>
    </div> -->

    <div id="shouhinfl">
      <div id="shouhinfl1">
        <div id="shouhinPic">
          <img src="/static/toredo/{{exhibit.F_ExPhoto}}" alt="">
        </div>
        <div id="shouhinhukusuu">
          {%if exhibit.F_ExPhotoS%}
          <div class="shouhinbetween">
            <img src="/static/toredo/{{exhibit.F_ExPhotoS}}" alt="">
          </div>
          {%elif exhibit.F_ExPhotoT%}
          <div class="shouhinbetween">
            <img src="/static/toredo/{{exhibit.F_ExPhotoT}}" alt="">
          </div>
          {%elif exhibit.F_ExPhotoF%}
          <div class="shouhinbetween">
            <img src="/static/toredo/{{exhibit.F_ExPhotoF}}" alt="">
          </div>
          {%elif exhibit.F_ExPhotoH%}
          <div class="shouhinbetween">
            <img src="/static/toredo/{{exhibit.F_ExPhotoH}}" alt="">
          </div>
          {%endif%}
        </div>
      </div>

      <div id="shouhinfl2">
        <p>{{ exhibit.F_ExTitle }}</p>
        <p>{{ exhibit.F_ExhibitID }}</p>
        <div id="flkakaku">
          <p>￥{{ '{:,.0f}'.format(exhibit.F_ExPrice) }} (税込)</p> 
          <a href="#"></a>
          <a href="#"></a>
        </div>

        {%if exhibit.F_EXhibitType == 2%}
        <a href="#" id="ka-to">欲しい</a>
        {%elif exhibit.F_Sold == False%}
        <a href="/settelement_check/{{exhibit.F_ExID}}" id="ka-to">購入する</a>
        {%elif exhibit.F_Sold == True%}
        <a href="#" id="ka-to">SOLD OUT !!</a>
        {%endif%}
        {% with messages = get_flashed_messages() %} {% for message in
          messages %}
          <ul id="flash">
            <li>
              <font color="red">{{ message }}</font>
            </li>
          </ul>
          {% endfor %} {% endwith %}
          <style>
            ul#flash {
              list-style: none;
              margin-top: 10px;
            }
          </style>

        <div id="moxtutomiru">
          <h1 id="shouhinnsetumei1">商品詳細</h1>
          <p id="texttexttext">
            {{ exhibit.F_ExInfo }}
          </p>
          <button id="moxtutomirubotan">もっと見る</button>
        </div>

        <div id="shouhinjyouhou">
          <h1 id="shouhinnjyouhoutext">商品情報</h1>
          <table id="shouhinnhyou">
            <tr>
              <th>カテゴリー</th>
              <td>
                <p class="hyounomoji">{{exhibit_category.F_CategoryName}}</p>
              </td>
            </tr>
            <tr>
              <th>商品の状態</th>
              <td><p class="hyounomoji">{{ exhibit.F_ExSit }}</p></td>
            </tr>
            <tr>
              <th>配送料の負担</th>
              <td><p class="hyounomoji"></p></td>
            </tr>
            <tr>
              <th>配送方法</th>
              <td><p class="hyounomoji">{{ exhibit.F_ExDeli }}</p></td>
            </tr>
            <tr>
              <th>配送元の地域</th>
              <td><p class="hyounomoji">{{user.F_PosttalCode}}</p></td>
            </tr>
          </table>

          <h1 id="saizuchecktext">
            サイズ感を確認する
            <a href="#" id="popup-link">見る</a>
          </h1>

          
          <div id="saizukankakuninnBox">
            <p id="shouhinhyouji">ゲージなど商品を表示</p>
            <div id="popup-container" class="popup-container">
              <canvas id="canvas" width="{{exhibit.F_Width}}" height="{{exhibit.F_Height}}"></canvas>
              <div id="close-button" class="close-button"></div>
            </div>
          </div>

          <div id="objbtnbox">
            <button  id="bicy" class="objbtn"  onclick="objBtn(this)">自転車</button>
            <button  id="bottle" class="objbtn" onclick="objBtn(this)" >ボトル</button>
          </div>
          

          <h1 id="shuxtupinshaProtext">出品者情報</h1>
          <div id="shuxtupinshaPro">
            <div id="shuxtupinnshaProPic">
              <img src="{{ url_for('static', filename='prof_image/' + users.F_ProfileImage)}}" alt="profile_image" style="width: 80px; height:80px; border-radius:50%;">
            </div>
            <div id="namaetofollow">
              <a href="/userprof/{{users.F_UserID}}">{{ users.F_UserName}}</a>
              <form action="/add_friend/{{ users.F_UserID }}" method="post">
                <input type="submit" value="フォロー">
              </form>
              <a href="#" id="reviewhoshi"></a>
              <p></p>
            </div>
          </div>
        </div>
      </div>

    </div>

    <p id="osusume">こちらの商品もおすすめです</p>
    <div id="osusumeshouhin">
    {% for recomends_list in recomend %}
      {% for recomends in recomends_list %}
        <a href="/product_detail/{{ recomends.F_ExID }}"><img src="/static/toredo/{{ recomends.F_ExPhoto }}" alt=""></a>
      {% endfor %}
    {% endfor %}
    
    </div>
      </div><!-- class="wrap" -->

    </main>

{% endblock %}